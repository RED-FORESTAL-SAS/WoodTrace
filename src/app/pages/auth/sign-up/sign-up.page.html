<app-header backButton="/login" title="Registro"></app-header>
<ion-content>
  <div class="wrapper">
    <!-- Vertical/Horizontal Container -->

    <div class="form">
      <!-- Nombre completo  -->
      <app-input-gradient
        max="50"
        label="Nombre Completo"
        type="text"
        [formControlValue]="fullName"
      >
      </app-input-gradient>
      <div class="validators" *ngIf="fullName.dirty && fullName.errors">
        <span *ngIf="fullName.errors?.['required']"
          >Ingresa tu nombre completo</span
        >
        <span *ngIf="fullName.errors?.['minlength']"
          >El nombre debe contener mínimo 4 caracteres</span
        >
      </div>

      <!-- Email  -->
      <app-input-gradient
        max="50"
        label="Correo Electrónico"
        type="email"
        [formControlValue]="email"
      >
      </app-input-gradient>
      <div class="validators" *ngIf="email.dirty && email.errors">
        <span *ngIf="email.errors?.['required']">Ingresa tu email</span>
        <span *ngIf="email.errors?.['email']">Ingresa un email válido</span>
      </div>

      <!-- Password -->
      <app-input-gradient
        max="16"
        label="Contraseña"
        type="password"
        [formControlValue]="password"
      ></app-input-gradient>
      <div class="validators" *ngIf="password.dirty && password.errors">
        <span *ngIf="password.errors?.['required']"
          >La contraseña es requerida</span
        >
        <span *ngIf="password.errors?.['pattern']">
          La contraseña debe contener:
          <ul>
            <li>La contraseña debe tener entre 8 y 16 caracteres</li>
            <li>Al menos un número</li>
            <li>Al menos una letra mayúscula</li>
            <li>Al menos una letra minúscula</li>
            <li>Puede tener otros símbolos ($@!%*?&.+)</li>
          </ul>
        </span>
      </div>

      <!-- Celular/ movil  -->
      <app-input-gradient
        max="50"
        label="Celular"
        type="text"
        [formControlValue]="movil"
      >
      </app-input-gradient>
      <div class="validators" *ngIf="fullName.dirty && fullName.errors">
        <span *ngIf="fullName.errors?.['required']"
          >Ingresa tu número de móvil</span
        >
        <span *ngIf="fullName.errors?.['minlength']"
          >El número de móvil debe contener al menos 10 caracteres. Ej: 300 555
          55 55</span
        >
      </div>

      <!-- Género  -->
      <app-input-gradient
        [selectOptions]="generoTypes"
        label="Género"
        type="select"
        [formControlValue]="genero"
      ></app-input-gradient>
      <div class="validators" *ngIf="genero.touched && genero.errors">
        <span *ngIf="genero.errors?.['required']">Selecciona un genero</span>
      </div>

    <!-- Fecha de nacimiento  -->
    <div class="ion-padding-bottom">
      <div *ngIf="fNacimiento.value" class="label animate__animated animate__fadeIn">Fecha de nacimiento</div>
      <div [ngClass]="{
          'gradient-input': !(fNacimiento.dirty && fNacimiento.errors),
          'gradient-input-error': fNacimiento.dirty && fNacimiento.errors
        }"
      >
        <ion-item lines="none">
          <ion-label *ngIf="fNacimiento.value === null" class="inside-input-text">Fecha de nacimiento</ion-label>
          <ion-input [disabled]="true">{{ fNacimiento.value | isoDateToddmmyyyy }}</ion-input>
          <ion-icon
            class="inside-input-text"
            title="fecha de nacimiento"
            slot="end"
            name="calendar-number-outline"
            id="datetimepop"
          ></ion-icon>
          <ion-popover trigger="datetimepop" [keepContentsMounted]="true">
            <ng-template>
              <ion-datetime 
                id="datetime" 
                locale="es-ES" 
                presentation="date" 
                showDefaultButtons="true"
                cancelText="Cancelar"
                doneText="OK"
                [value]="fNacimiento.value" 
                (ionChange)="onFNacimientoSelected($event)"
              ></ion-datetime>
            </ng-template>
          </ion-popover>
        </ion-item>
      </div>
    </div>
    <div class="validators" *ngIf="fNacimiento.dirty && fNacimiento.errors">
      <span *ngIf="fNacimiento.errors?.['required']">Ingresa tu fecha de nacimiento</span>
    </div>

      <!-- Tipo de documento  -->
      <app-input-gradient
        [selectOptions]="docTypes"
        label="Tipo de documento"
        type="select"
        [formControlValue]="docType"
      ></app-input-gradient>
      <div class="validators" *ngIf="docType.touched && docType.errors">
        <span *ngIf="docType.errors?.['required']"
          >Selecciona el tipo de documento de identidad</span
        >
      </div>

      <!-- Número de documento  -->
      <app-input-gradient
        max="15"
        min="6"
        label="No. de documento"
        type="tel"
        [formControlValue]="docNumber"
      >
      </app-input-gradient>
      <div class="validators" *ngIf="docNumber.dirty && docNumber.errors">
        <span *ngIf="docNumber.errors?.['required']"
          >Ingresa el número del documento de identidad</span
        >
        <span *ngIf="docNumber.errors?.['minlength']"
          >El número del documento debe contener mínimo 6 caracteres</span
        >
      </div>

      <!-- Button -->
      <div class="btn-gradient">
        <ion-button (click)="createUser()" [disabled]="!validator()" mode="ios">
          <span>Registrarme</span>
        </ion-button>
      </div>
    </div>
  </div>
</ion-content>
