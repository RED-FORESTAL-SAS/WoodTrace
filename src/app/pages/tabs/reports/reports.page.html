<ion-content>
  <div class="wrapper">
    <div class="user-info row">
      <ion-grid>
        <ion-row size="auto">
          <ion-col style="vertical-align: bottom">
            <h4>Reportes</h4>
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>
    <div class="btn-container">
      <ion-grid>
        <ion-row style="margin-bottom: 25px">
          <ion-col align-items-center>
            <app-input-gradient
              label="Buscar"
              type="string"
              [formControlValue]="busqueda"
            >
            </app-input-gradient>
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col class="table-container">
            <table>
              <thead class="header">
                <th>Identificación</th>
                <th>Municipio</th>
                <th>Fecha</th>
                <th>Acciones</th>
              </thead>
              <tr *ngFor="let report of reports$ | async; index as i">
                <td>
                  <span *ngIf="report.synced"> &#x2713;</span> {{ report.placa
                  }}{{report.docNumber}}
                </td>
                <td>{{ report.municipio }}</td>
                <td>{{ report.fCreado | timestamp | date: 'dd-MM-yyyy' }}</td>
                <td>
                  <ion-icon
                    class="option-icon"
                    src="assets/icon/wt_Property 1=Reports.svg"
                    title="Ver detalle"
                    (click)="onViewReport(report)"
                  ></ion-icon>
                  <ion-icon
                    class="option-icon"
                    src="assets/icon/dawnload_report.svg"
                    title="Descargar reporte"
                    (click)="downloadReport(report)"
                  ></ion-icon>
                </td>
              </tr>
            </table>
          </ion-col>
        </ion-row>
        <ion-row *ngIf="(online$ | async) === true">
          <ion-col align-items-center>
            <div class="btn-gradient">
              <p *ngIf="(loadingReports$ | async) === true">
                Cargando reportes...
              </p>
              <ion-button
                mode="ios"
                *ngIf="(loadingReports$ | async) === false"
                (click)="fetchNextReportPage()"
              >
                <span>Cargar más</span>
              </ion-button>
            </div></ion-col
          >
        </ion-row>
      </ion-grid>
    </div>
  </div>
</ion-content>
